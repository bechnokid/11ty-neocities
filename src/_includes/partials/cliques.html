{% set imgPath = "/assets/images/goodies/cliques/" %}

{% macro textClique(clique) %}
  {# Left text #}
  {% set leftUrl = clique.left.url or clique.leftUrl %}
  {% set leftText = clique.left.text or clique.leftText or clique.left %}
  {% if leftUrl %}
    <a href="{{ leftUrl }}">
      <span {% if clique.left.cls %} class="{{ clique.left.cls }}"{% endif %}>
        {{ leftText }}
      </span>
    </a>
  {% else %}
    <span {% if clique.left.cls %}class="{{ clique.left.cls }}"{% endif %}>
      {{ leftText | safe }}
    </span>
  {% endif %}
  {# Center text (or image) #}
  {% if clique.center.img %}
    {% decoImg src = imgPath + clique.center.img, cls = 'mx-2' %}
  {% elif clique.center.url %}
    <a href="{{ clique.center.url }}" class="mx-2{{ (" " + clique.center.cls) if clique.center.cls else "" }}">
      {{ clique.center.text or clique.center }}
    </a>
  {% else %}
    <span class="mx-2{{ (" " + clique.center.cls) if clique.center.cls else "" }}">
      {{ clique.center }}
    </span>
  {% endif %}
  {# Right text #}
  <span {% if clique.right.cls %} class="{{ clique.right.cls }}"{% endif %}>
    {{ clique.right.text or clique.rightText or clique.right | safe }}
  </span>
{% endmacro %}

<div class="row g-0">
  {% galleryBox { title: "Cliques", cls: 'cliques' } %}
    <div class="row g-0 mb-0 mb-lg-2">
      <div class="col-lg-6 col-12 d-flex flex-column align-items-center order-lg-1 order-2">
        {%- for clique in cliques.col1 %}
        <div class="d-flex align-items-center {% if not loop.last %}mb-1{% endif %}">
          {{ textClique (clique) }}
        </div>
        {% endfor %}
      </div>
      <div class="col-lg-6 col-12 justify-content-center order-lg-2 order-1">
        <div class="desktop-only">
          {%- for row in cliques.col2 %}
          <div class="row">
            <div class="col d-flex flex-wrap justify-content-center align-items-baseline">
              {%- for clique in row %}
                {% set altText = clique.imgAlt + " for the '" + clique.title + "' clique"%}
                {% set cliqueSrc = cliques.path + clique.img %}
                {% if clique.tooltip %}
                  {% tooltip { tooltipId: "clique-" + clique.id, url: clique.url, src: cliques.path + clique.img, alt: altText, cls: 'mx-1' } %}{{ clique.tooltip }}{% endtooltip %}
                {% else %}
                  {% img cliqueSrc, { url: clique.url, alt: altText, cls: 'mx-1' } %}
                {% endif %}
              {% endfor %}
            </div>
          </div>
          {% endfor %}
        </div>
        <div class="mobile-only">
          {%- for row in cliques.col2 %}
            {%- for clique in row %}
              {% if clique.mobile %}
                {% set mobile = clique.mobile %}
                <div class="d-flex justify-content-center align-items-center">
                  {{ textClique ({ leftText: mobile.left, leftUrl: clique.url, center: mobile.center, right: mobile.right }) }}
                </div>
              {% endif %}
            {% endfor %}
          {% endfor %}
        </div>
      </div>
    </div>
  {% endgalleryBox %}
</div>