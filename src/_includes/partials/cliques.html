{% set imgPath = "/assets/images/goodies/cliques/" %}

{% macro cliqueText(text, options = {}) %}
  {% set safeText = text | safe %}
  {% if options.url %}
    <a href="{{ options.url }}" {% if options.cls %}class="{{ options.cls | trim }}"{% endif %}>
      {{ safeText }}
    </a>
  {% elif options.cls != undefined %}
    <span class="{{ options.cls }}">{{ safeText }}</span>
  {% else %}
    {{ safeText }}
  {% endif %}
{% endmacro %}

{% macro textClique(clique) %}
  {# Left text #}
  {% set leftUrl = clique.left.url or clique.leftUrl %}
  {% set leftText = clique.left.text or clique.leftText or clique.left %}
  {{ cliqueText(leftText, { url: leftUrl, cls: clique.left.cls }) }}

  {# Center text (or image) #}
  {% set centerUrl = clique.center.url or clique.centerUrl %}
  {% set centerText = clique.center.text or clique.centerText or clique.center %}
  {% if clique.center.img %}
    {% decoImg src = imgPath + clique.center.img, cls = 'mx-2' %}
  {% else %}
    {{ cliqueText(centerText, { url: centerUrl, cls: 'mx-2 ' + clique.center.cls }) }}
  {% endif %}

  {# Right text #}
  {% set rightUrl = clique.right.url or clique.rightUrl %}
  {% set rightText = clique.right.text or clique.rightText or clique.right %}
  {{ cliqueText(rightText, { url: rightUrl, cls: clique.right.cls }) }}
{% endmacro %}

<div class="row g-0">
  {% galleryBox { title: "Cliques", cls: 'cliques' } %}
    <div class="row g-0 mb-0 mb-lg-2">
      <div class="col-lg-6 col-12 d-flex flex-column align-items-center order-lg-1 order-2">
        {%- for clique in cliques.col1 %}
        <div class="d-flex align-items-center {% if not loop.last %}mb-1{% endif %}">
          {{ textClique (clique) }}
        </div>
        {% endfor %}
      </div>
      <div class="col-lg-6 col-12 justify-content-center order-lg-2 order-1">
        <div class="desktop-only">
          {%- for row in cliques.col2 %}
          <div class="row">
            <div class="col d-flex flex-wrap justify-content-center align-items-baseline">
              {%- for clique in row %}
                {% set altText = clique.imgAlt + " for the '" + clique.title + "' clique"%}
                {% set cliqueSrc = cliques.path + clique.img %}
                {% if clique.tooltip %}
                  {% tooltip { tooltipId: "clique-" + clique.id, url: clique.url, src: cliques.path + clique.img, alt: altText, cls: 'mx-1' } %}{{ clique.tooltip }}{% endtooltip %}
                {% else %}
                  {% img cliqueSrc, { url: clique.url, alt: altText, cls: 'mx-1' } %}
                {% endif %}
              {% endfor %}
            </div>
          </div>
          {% endfor %}
        </div>
        <div class="mobile-only">
          {%- for row in cliques.col2 %}
            {%- for clique in row %}
              {% if clique.mobile %}
                {% set mobile = clique.mobile %}
                <div class="d-flex justify-content-center align-items-center">
                  {{ textClique ({ leftText: mobile.left, leftUrl: clique.url, center: mobile.center, right: mobile.right }) }}
                </div>
              {% endif %}
            {% endfor %}
          {% endfor %}
        </div>
      </div>
    </div>
  {% endgalleryBox %}
</div>